---
import Layout from '../layouts/Layout.astro';
---
<Layout title="Spring Creek Golf League">

<h1>Golf League Tally Sheet</h1>

<form 
name="tallysheet" id="form1" method="post" data-netlify="true" onSubmit="submit"
data-netlify-honeypot="bot-field"
>
<input type="hidden" name="bot-field">
Team: <select name="team1" id="team1" >
    <option value="" selected="selected">Select team</option>
  </select>
Points: <input type="number" id="team1Pts" name="team1Pts" min="0" max="54"><br><br>
A: <select name="player1A" id="player1A">
  <option value="" selected="selected">Please select player</option>
</select>
Score: <input type="number" id="p1Ascore" name="p1Ascore" min="30" max="72"><br><br>
B: <select name="player1B" id="player1B">
  <option value="" selected="selected">Please select player</option>
</select>
Score: <input type="number" id="p1Bscore" name="p1Bscore" min="30" max="72"><br><br>
Team: <select name="team2" id="team2" >
    <option value="" selected="selected">Select team</option>
  </select>
Points: <input type="number" id="team2Pts" name="team2Pts" min="0" max="54">
<br><br>
A: <select name="player2A" id="player2A">
    <option value="" selected="selected">Please select player</option>
  </select>
Score: <input type="number" id="p2Ascore" name="p2Ascore" min="30" max="72">
  <br><br>
B: <select name="player2B" id="player2B">
    <option value="" selected="selected">Please select player</option>
  </select>
  Score: <input type="number" id="p2Bscore" name="p2Bscore" min="30" max="72">
  <br><br>
  <label for="file">Take a photo to upload</label><br><br>
  <input type="file" id="upload" name="upload" accept="image/*" /> <br><br><br>

  <input type="submit" value="submit"> 
 
</form>



</Layout>


<script>
//  

/*
import { renderAstroTemplateResult } from "astro/dist/runtime/server/render";
import Teams from "./teams.astro";
*/

const teamPlayer = 
{
"teams":[
    {
        "id": 1,
        "name": "Divots",
        "number": 1,
        "players": [
            {
                "pid": 8,
                "firstName": "Dan",
                "lastName": "Cervantes",
                "email": "dancervantes@sbcglobal.net",
                "phone": " ",
                "hdcpIndex": 8
            },
            {
                "pid": 38,
                "firstName": "Richard",
                "lastName": "Blanford",
                "email": "rblanford@bmailpro.com",
                "phone": " ",
                "hdcpIndex": 4
            },
            {
                "pid": 72,
                "firstName": "Alex",
                "lastName": "Hill",
                "email": "alexhill45@verizon.net",
                "phone": " ",
                "hdcpIndex": 10
            },
            {
                "pid": 86,
                "firstName": "Marty",
                "lastName": "Leister",
                "email": "mleister60@hotmail.com",
                "phone": " ",
                "hdcpIndex": 5
            }
        ]
    },
    {
        "id": 2,
        "name": "Tee'd Off",
        "number": 2,
        "players": [
            {
                "pid": 4,
                "firstName": "Brent",
                "lastName": "Jones",
                "email": "alvisbjones@gmail.com",
                "phone": "214-649-2059",
                "hdcpIndex": 3
            },
            {
                "pid": 9,
                "firstName": "Bill",
                "lastName": "Harrell",
                "email": "bhconnect@yahoo.com",
                "phone": " ",
                "hdcpIndex": 4
            },
            {
                "pid": 81,
                "firstName": "Chuck",
                "lastName": "Locke",
                "email": " ",
                "phone": " ",
                "hdcpIndex": 10
            },
            {
                "pid": 89,
                "firstName": "Steve",
                "lastName": "Brigante",
                "email": "steve.brigante@verizon.net",
                "phone": "469-235-6032",
                "hdcpIndex": 8
            },
            {
                "pid": 99,
                "firstName": "Brad",
                "lastName": "Weldon",
                "email": " ",
                "phone": " ",
                "hdcpIndex": 4
            }
        ]
    }]}



window.onload = function() {
  const team1Sel = document.getElementById("team1");
  const team2Sel = document.getElementById("team2");
  const playerSel1A = document.getElementById("player1A");
  const playerSel2A = document.getElementById("player2A");
  const playerSel1B = document.getElementById("player1B");
  const playerSel2B = document.getElementById("player2B");
  
 
  for (const t of teamPlayer.teams) {
    team1Sel.options[team1Sel.options.length] = new Option(t.name, t.id-1);
    team2Sel.options[team2Sel.options.length] = new Option(t.name, t.id-1);
  }

  team1Sel.onchange = function() {
    //alert(this.name)
    //alert(this.value)
    //alert(teamPlayer.teams[this.value].players)
    playerSel1A.length = 1;
    for (const p of teamPlayer.teams[this.value].players) {
        //alert(p.pid)
        const name = p.lastName + "," + p.firstName
        playerSel1A.options[playerSel1A.options.length] = new Option(name, p.pid);
        playerSel1B.options[playerSel1B.options.length] = new Option(name, p.pid);
    }
  }

  
  team2Sel.onchange = function() {
    //alert(this.name)
    //alert(this.value)
    //alert(teamPlayer.teams[this.value].players)
    playerSel2A.length = 1;
    playerSel2B.length = 1;

    for (const p of teamPlayer.teams[this.value].players) {
        //alert(p.pid)
        const name = p.lastName + "," + p.firstName
        playerSel2A.options[playerSel2A.options.length] = new Option(name, p.pid);
        playerSel2B.options[playerSel2B.options.length] = new Option(name, p.pid);

    }
  }

  
}
</script>







